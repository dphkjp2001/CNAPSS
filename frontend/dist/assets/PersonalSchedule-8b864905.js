import{r as f,R as r}from"./index-1baf5031.js";import{S as v}from"./ScheduleGrid-4682bf50.js";function N({data:o,onSelect:i}){const[s,n]=f.useState(""),t=e=>e.toLowerCase().replace(/[\s\-]/g,""),u=f.useMemo(()=>!s||!Array.isArray(o)?[]:o.flatMap(e=>Array.isArray(e.sections)?e.sections.map(l=>({course_code:e.course_code,course_title:e.course_title,section_number:l.section_number,class_number:l.class_number,meets:l.meets})):[]).filter(e=>t(e.course_code).includes(t(s))||t(e.course_title).includes(t(s))).slice(0,100),[s,o]);return r.createElement("div",{className:"mb-4"},r.createElement("input",{type:"text",className:"w-full p-2 border rounded text-sm",placeholder:"Search courses by code or title...",value:s,onChange:e=>n(e.target.value),autoComplete:"off"}),r.createElement("div",{className:"space-y-2 max-h-72 overflow-y-auto mt-2"},u.length>0?u.map(e=>r.createElement("div",{key:e.class_number,onClick:()=>i(e),className:"border p-2 rounded bg-white shadow-sm cursor-pointer hover:bg-blue-50 transition"},r.createElement("div",{className:"text-sm font-medium"},e.course_code," - ",e.course_title),r.createElement("div",{className:"text-xs ml-2 text-gray-700"},"Section ",e.section_number,": ",e.meets))):s&&r.createElement("div",{className:"text-sm text-gray-500 p-4"},"No matching courses found.")))}function C(o,i,s){if(!o)return[];const n=/([MTWRF]+)\s(\d{1,2})(?::(\d{2}))?(a|p)?-(\d{1,2})(?::(\d{2}))?(a|p)/i,t=o.match(n);if(!t)return[];const u=t[1],e=parseInt(t[2]),l=parseInt(t[3]||"0"),a=t[4],_=parseInt(t[5]),d=parseInt(t[6]||"0"),m=t[7].toLowerCase(),b=(a||m).toLowerCase(),c=e%12+(b==="p"?12:0),p=_%12+(m==="p"?12:0),h=`${c.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`,y=`${p.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`,E={M:"MON",T:"TUE",W:"WED",R:"THU",F:"FRI"};return u.split("").map(S=>({day:E[S],start:h,end:y,label:i,class_number:s}))}function x(){const[o,i]=f.useState([]),[s,n]=f.useState([]);f.useEffect(()=>{fetch("/NYU_course_DATA.json").then(e=>e.json()).then(e=>i(e)).catch(e=>console.error("Failed to load course data:",e))},[]);const t=e=>{if(s.some(a=>a.label===e.course_code&&a.class_number===e.class_number))n(a=>a.filter(_=>_.class_number!==e.class_number));else{const a=C(e.meets,e.course_code,e.class_number);if(a.some(d=>s.some(m=>m.day===d.day&&!(d.end<=m.start||d.start>=m.end)))){if(!window.confirm("선택한 과목이 기존 수업과 시간이 겹칩니다. 기존 과목을 이 과목으로 바꾸시겠습니까?"))return;const m=a.flatMap(c=>s.filter(p=>p.day===c.day&&!(c.end<=p.start||c.start>=p.end))).map(c=>c.class_number),b=s.filter(c=>!m.includes(c.class_number));n([...b,...a]);return}n(d=>[...d,...a])}},u=e=>{n(l=>l.filter(a=>a.class_number!==e))};return r.createElement("div",{className:"p-6"},r.createElement("h1",{className:"text-xl font-semibold mb-4"},"Personal Schedule Builder"),r.createElement("div",{className:"flex gap-6"},r.createElement("div",{className:"w-3/12"},r.createElement(N,{data:o,onSelect:t})),r.createElement("div",{className:"w-9/12"},r.createElement(v,{schedules:s,onRemove:u}))))}export{x as default};
