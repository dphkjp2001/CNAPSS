import{u as x,a as h,b as E,c as f,r as c,R as e,N as b,L as l}from"./index-a5990364.js";import{f as N}from"./posts-e0b364e4.js";import{M as g,T as y,a as w,P as v}from"./leaflet-b56fcc7a.js";function L(){const d=x(),{user:n}=h(),{school:r,schoolTheme:o,loading:u}=E(),t=f(),[m,i]=c.useState([]),s=c.useMemo(()=>({lat:40.7291,lon:-73.9965}),[]);return u?null:r?(c.useEffect(()=>{(async()=>{try{const a=await N(r),p=Array.isArray(a)?a.slice(0,5):[];i(p)}catch(a){console.error("Failed to load posts:",a),i([])}})()},[r]),e.createElement("div",{className:"min-h-screen",style:{backgroundColor:o.bg}},e.createElement("div",{className:"mx-auto flex w-full max-w-screen-xl flex-col gap-8 px-6 py-12 lg:flex-row"},e.createElement("aside",{className:"w-full shrink-0 rounded-2xl border border-sand bg-white/80 p-6 shadow-md backdrop-blur-md lg:w-72"},e.createElement("div",{className:"text-center"},e.createElement("div",{className:"mx-auto h-20 w-20 rounded-full",style:{backgroundColor:o.primary}}),e.createElement("p",{className:"mt-4 text-xl font-bold",style:{color:o.text}},n==null?void 0:n.nickname),e.createElement("p",{className:"text-sm text-gray-500"},r.toUpperCase())),e.createElement("ul",{className:"mt-6 space-y-3 text-sm text-gray-700"},e.createElement("li",null,e.createElement(l,{to:t("/myposts"),className:"transition hover:text-softGold"},"My Posts")),e.createElement("li",null,e.createElement(l,{to:t("/liked"),className:"transition hover:text-softGold"},"Liked")),e.createElement("li",null,e.createElement(l,{to:t("/commented"),className:"transition hover:text-softGold"},"Commented")),e.createElement("li",null,e.createElement(l,{to:t("/personal-schedule"),className:"transition hover:text-softGold"},"Schedule")),e.createElement("li",null,e.createElement(l,{to:t("/market"),className:"transition hover:text-softGold"},"Marketplace")),e.createElement("li",null,e.createElement(l,{to:t("/foodmap"),className:"transition hover:text-softGold"},"Food Map")))),e.createElement("main",{className:"flex w-full flex-1 flex-col gap-6"},e.createElement("section",{className:"w-full rounded-2xl border border-sand bg-white p-6 shadow-md"},e.createElement("div",{className:"mb-4 flex items-center justify-between"},e.createElement(l,{to:t("/freeboard")},e.createElement("h2",{className:"cursor-pointer text-2xl font-bold hover:underline",style:{color:o.text}},"Free Board")),e.createElement(l,{to:t("/freeboard"),className:"text-sm text-blue-600 hover:underline"},"View All")),m.length>0?e.createElement("ul",{className:"space-y-3"},m.map(a=>e.createElement("li",{key:a._id,className:"rounded-xl border border-gray-200 px-6 py-4 shadow transition hover:shadow-md"},e.createElement(l,{to:t(`/freeboard/${a._id}`),className:"block text-base font-semibold text-gray-900 hover:underline"},a.title),e.createElement("p",{className:"mt-1 text-xs text-gray-500"},new Date(a.createdAt).toLocaleDateString())))):e.createElement("p",{className:"text-sm text-gray-500"},"Latest posts will appear here.")),e.createElement("section",{onClick:()=>d(t("/foodmap")),className:"cursor-pointer overflow-hidden rounded-2xl border border-sand bg-white p-0 shadow-inner transition hover:shadow-lg",title:"Go to Food Map"},e.createElement("div",{className:"p-6"},e.createElement("h2",{className:"mb-1 flex items-center gap-2 text-lg font-semibold",style:{color:o.text}},"üçΩÔ∏è Explore Nearby Food",e.createElement("span",{className:"ml-2 text-xs text-blue-600 underline"},"Open map")),e.createElement("p",{className:"text-sm text-gray-700"},"Discover top‚Äërated restaurants and cafes near campus. Click to open the full map.")),e.createElement("div",{className:"h-56 select-none"},e.createElement(g,{center:[s.lat,s.lon],zoom:15,style:{height:"100%",width:"100%"},attributionControl:!1,zoomControl:!1},e.createElement(y,{attribution:"¬© OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.createElement(w,{position:[s.lat,s.lon]},e.createElement(v,null,"Campus Center"))))))))):e.createElement(b,{to:"/select-school"})}export{L as default};
