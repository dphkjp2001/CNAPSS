import{i as _,u as P,b as j,c as B,r as f,o as I,p as L,R as e,q as R}from"./index-f94b14cd.js";import{A as D,U as T,C as U}from"./CommentSection-a33efe93.js";import{G as x,B as c,C as G,a as O,E as Q,R as q}from"./RequestOfferPanel-652e8eff.js";import{d as E,r as V}from"./relativeTime-cbaae338.js";import"./createLucideIcon-620f483b.js";import"./useLoginGate-c7a37e50.js";E.extend(V);E.locale("en");const $={accent:"#FF7A70",accentHover:"#FF6B61"};function H(g=""){const s=String(g||"").toLowerCase().replace(/[\s-]+/g,"_");return s.includes("course_material")?"ðŸ“":s.includes("study")?"ðŸ‘¥":s.includes("coffee")?"â˜•ï¸":"ðŸ“Œ"}function Y(){var v,w,k,C;const{school:g,id:s}=_(),b=P(),{school:A}=j(),n=g||A||"nyu",{user:i}=B(),[m,p]=f.useState({loading:!0,error:"",post:null});if(f.useEffect(()=>{let a=!0;return(async()=>{try{const r=await I({school:n,id:s});if(!a)return;p({loading:!1,error:"",post:r})}catch(r){if(!a)return;p({loading:!1,error:(r==null?void 0:r.message)||"Failed to load post.",post:null})}})(),()=>{a=!1}},[n,s]),f.useEffect(()=>{if(!i)return;let a=!0;return(async()=>{try{const r=await L({school:n,id:s});if(!a)return;p(u=>({...u,post:r||u.post}))}catch{}})(),()=>{a=!1}},[i,n,s]),m.loading)return e.createElement("div",{className:"min-h-screen bg-[#F8F9FA] flex items-center justify-center"},e.createElement("div",{className:"text-gray-600"},"Loadingâ€¦"));if(m.error)return e.createElement("div",{className:"min-h-screen bg-[#F8F9FA] flex items-center justify-center"},e.createElement("div",{className:"text-red-600"},m.error));if(!m.post)return e.createElement("div",{className:"min-h-screen bg-[#F8F9FA] flex items-center justify-center"},e.createElement("div",{className:"text-gray-600"},"Post not found."));const t=m.post,y=(t.mode||t.postType||t.type||"").toString().toLowerCase(),d=y==="seeking"||y==="looking_for",N=!d,h=i&&[(v=t.author)==null?void 0:v._id,(w=t.author)==null?void 0:w.id,t.userId,t.authorId].filter(Boolean).map(String).some(a=>String(a)===String(i._id||i.id)),F=async()=>{if(window.confirm("Delete this post?"))try{await R({school:n,id:s}),alert("Post deleted."),b(`/${encodeURIComponent(n)}/dashboard?tab=academic`)}catch(a){alert("Delete failed: "+((a==null?void 0:a.message)||"Unknown error"))}},l=a=>a&&String(a).trim()!==""?String(a):"Not specified";let o=[];if(N)o=[{label:"Related Course",value:l(t.courseName),icon:x},{label:"Question Details",value:l(t.content),icon:c}];else{const a=String(t.kind||"").toLowerCase().replace(/[\s-]+/g,"_");a==="course_materials"?o=[{label:"Course Name",value:l(t.title||t.courseName),icon:c},{label:"Professor",value:l(t.professor),icon:x},{label:"Semester",value:l(t.semester),icon:G},{label:"Looking for Materials",value:Array.isArray(t.materials)&&t.materials.length?t.materials.map(r=>r.replace(/_/g," ")).join(", "):"Not specified",icon:c}]:a==="coffee_chat"?o=[{label:"Title",value:l(t.title),icon:O},{label:"Topic",value:l(t.content),icon:c}]:a==="study_mate"?o=[{label:"Class",value:l(t.courseName),icon:x},{label:"Topic",value:l(t.content),icon:c}]:o=[{label:"Content",value:l(t.content),icon:c}]}const S=((k=t.author)==null?void 0:k.name)||((C=t.author)==null?void 0:C.username)||"Anonymous";return d&&String(t.kind||"").replace(/_/g," "),e.createElement("div",{className:"min-h-screen bg-[#F8F9FA] py-8"},e.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},e.createElement("button",{onClick:()=>b(`/${encodeURIComponent(n)}/dashboard?tab=academic`),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6 font-medium transition-colors"},e.createElement(D,{className:"w-4 h-4"}),e.createElement("span",null,"Back to Academic Board")),e.createElement("div",{className:"grid gap-6 lg:grid-cols-[1fr,380px]"},e.createElement("article",{className:"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden"},e.createElement("header",{className:"px-6 py-5 border-b border-gray-100"},e.createElement("div",{className:"flex items-start justify-between gap-4 mb-4"},e.createElement("div",{className:"flex items-start gap-3 flex-1"},e.createElement("div",{className:"w-11 h-11 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center shrink-0"},e.createElement(T,{className:"w-5 h-5 text-gray-600"})),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("div",{className:"flex items-center gap-2 flex-wrap"},e.createElement("span",{className:"font-semibold text-gray-900"},S),e.createElement("span",{className:"text-gray-400"},"â€¢"),e.createElement("span",{className:"text-sm text-gray-500"},E(t.createdAt).fromNow())),e.createElement("div",{className:"flex items-center gap-2 mt-1"},e.createElement("span",{className:"text-sm text-gray-500"},"Academic Board"),d&&e.createElement(e.Fragment,null,e.createElement("span",{className:"text-gray-300"},"â€¢"),e.createElement("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium text-white",style:{backgroundColor:$.accent}},e.createElement("span",null,H(t.kind)),e.createElement("span",null,"Seeking")))))),h&&e.createElement("button",{className:"text-gray-400 hover:text-gray-600 transition-colors"},e.createElement(Q,{className:"w-5 h-5"}))),e.createElement("h1",{className:"text-2xl font-bold text-gray-900 leading-tight"},t.title||"Untitled"),N&&e.createElement("div",{className:"mt-3 inline-flex items-center gap-2 px-3 py-1.5 bg-blue-50 border border-blue-200 rounded-lg"},e.createElement("span",{className:"text-base"},"ðŸ’¬"),e.createElement("span",{className:"text-sm font-medium text-blue-700"},"General Question"))),e.createElement("div",{className:"px-6 py-6"},e.createElement("div",{className:"space-y-6"},o.map((a,r)=>{const u=a.icon||c;return e.createElement("div",{key:r,className:"flex items-start gap-4"},e.createElement("div",{className:"w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center shrink-0"},e.createElement(u,{className:"w-5 h-5 text-gray-600"})),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("p",{className:"text-sm font-medium text-gray-500 mb-1.5"},a.label),e.createElement("p",{className:"text-gray-900 whitespace-pre-wrap leading-relaxed"},a.value)))})),h&&e.createElement("div",{className:"mt-8 pt-6 border-t border-gray-100"},e.createElement("button",{onClick:F,className:"px-4 py-2.5 bg-red-500 text-white font-medium rounded-lg hover:bg-red-600 active:scale-[0.98] transition-all shadow-sm"},"Delete Post"))),!d&&e.createElement("div",{className:"border-t border-gray-200 bg-gray-50/50"},e.createElement("div",{className:"px-6 py-6"},e.createElement("h3",{className:"font-semibold text-gray-900 mb-4"},"Comments"),e.createElement(U,{postId:t._id||s})))),d&&e.createElement("div",{className:"lg:sticky lg:top-24 self-start"},e.createElement(q,{school:n,postId:t._id||s,kind:String(t.kind||"").toLowerCase().replace(/[\s-]+/g,"_")})))))}export{Y as default};
