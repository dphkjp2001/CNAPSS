const r="https://api.cnapss.com/api".replace(/\/+$/,"");function d(){const t=localStorage.getItem("token");return t?{Authorization:`Bearer ${t}`}:{}}async function e(t,{method:o="GET",headers:c={},body:s}={}){const n=await fetch(`${r}${t}`,{method:o,headers:{"Content-Type":"application/json",...d(),...c},body:s?JSON.stringify(s):void 0});let a=null;try{a=await n.json()}catch{}if(!n.ok)throw new Error((a==null?void 0:a.message)||`HTTP ${n.status}`);return a}const i=async t=>t?e(`/posts?school=${encodeURIComponent(t)}`):[],h=async(t,o)=>e(`/posts/${t}?school=${encodeURIComponent(o)}`),m=async({email:t,nickname:o,title:c,content:s,school:n})=>{if(!n)throw new Error("School is required.");return e("/posts",{method:"POST",body:{email:t,nickname:o,title:c,content:s,school:n}})},u=async(t,{email:o,title:c,content:s})=>e(`/posts/${t}`,{method:"PUT",body:{email:o,title:c,content:s}}),y=async(t,o)=>e(`/posts/${t}`,{method:"DELETE",body:{email:o}}),$=async(t,o)=>e(`/posts/${t}/thumbs`,{method:"POST",body:{email:o}}),f=async(t,o)=>e(`/posts/liked/${encodeURIComponent(t)}?school=${encodeURIComponent(o)}`),l=async(t,o)=>e(`/posts/commented/${encodeURIComponent(t)}?school=${encodeURIComponent(o)}`);export{f as a,l as b,m as c,h as d,y as e,i as f,$ as t,u};
