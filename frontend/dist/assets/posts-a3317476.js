const r="https://api.cnapss.com/api".replace(/\/$/,""),a=o=>({"Content-Type":"application/json",Authorization:`Bearer ${o}`});async function h({school:o,token:s,page:e,limit:t}={}){const n=new URL(`${r}/${o}/posts`);e&&n.searchParams.set("page",String(e)),t&&n.searchParams.set("limit",String(t));const c=await fetch(n,{headers:a(s)});if(!c.ok)throw new Error("Failed to load posts");return c.json()}async function i({school:o,token:s,id:e}){const t=await fetch(`${r}/${o}/posts/${e}`,{headers:a(s)});if(!t.ok)throw new Error("Failed to load post");return t.json()}async function f({school:o,token:s,title:e,content:t}){const n=await fetch(`${r}/${o}/posts`,{method:"POST",headers:a(s),body:JSON.stringify({title:e,content:t})});if(!n.ok)throw new Error("Failed to create post");return n.json()}async function l({school:o,token:s,id:e,title:t,content:n}){const c=await fetch(`${r}/${o}/posts/${e}`,{method:"PUT",headers:a(s),body:JSON.stringify({title:t,content:n})});if(!c.ok)throw new Error("Failed to update post");return c.json()}async function p({school:o,token:s,id:e}){const t=await fetch(`${r}/${o}/posts/${e}`,{method:"DELETE",headers:a(s)});if(!t.ok)throw new Error("Failed to delete post");return t.json()}async function u({school:o,token:s,id:e}){const t=await fetch(`${r}/${o}/posts/${e}/thumbs`,{method:"POST",headers:a(s)});if(!t.ok)throw new Error("Failed to toggle like");return t.json()}async function w({school:o,token:s,email:e}){const t=await fetch(`${r}/${o}/posts/liked/${encodeURIComponent(e)}`,{headers:a(s)});if(!t.ok)throw new Error("Failed to load liked posts");return t.json()}async function $({school:o,token:s,email:e}){const t=await fetch(`${r}/${o}/posts/commented/${encodeURIComponent(e)}`,{headers:a(s)});if(!t.ok)throw new Error("Failed to load commented posts");return t.json()}const d=()=>{try{return localStorage.getItem("token")}catch{return""}};async function m(o,s,e={}){const t=e.token||d();return i({school:s,token:t,id:o})}export{w as a,$ as b,f as c,p as d,m as f,i as g,h as l,u as t,l as u};
