import{a as f,b as h,c as b,r as s,R as t,L as p}from"./index-a5990364.js";import{f as E}from"./posts-e0b364e4.js";function P(){const{user:a}=f(),{school:r,schoolTheme:o}=h(),i=b(),[n,x]=s.useState([]),[u,c]=s.useState(!0),[m,y]=s.useState("");s.useEffect(()=>{r&&(async()=>{c(!0);try{const e=await E(r);x(Array.isArray(e)?e:[])}catch(e){y((e==null?void 0:e.message)||"Failed to load posts.")}finally{c(!1)}})()},[r]);const d=s.useMemo(()=>{const e=a==null?void 0:a.email;return e?n.filter(l=>l.email===e).sort((l,g)=>new Date(g.createdAt)-new Date(l.createdAt)):[]},[n,a==null?void 0:a.email]);return t.createElement("div",{className:"min-h-screen px-4 py-8 sm:px-6",style:{backgroundColor:(o==null?void 0:o.bg)||"#f6f3ff"}},t.createElement("div",{className:"mx-auto max-w-4xl"},t.createElement("h2",{className:"mb-6 text-2xl font-bold text-gray-900"},"My Posts"),u?t.createElement("div",{className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm text-sm text-gray-600"},"Loading…"):m?t.createElement("div",{className:"rounded-xl border border-red-200 bg-red-50 p-3 text-sm text-red-700"},m):d.length===0?t.createElement("p",{className:"text-gray-600"},"You haven’t posted anything yet."):t.createElement("ul",{className:"space-y-4"},d.map(e=>t.createElement("li",{key:e._id,className:"rounded-xl border border-gray-200 bg-white p-4 shadow-sm"},t.createElement(p,{to:i(`/freeboard/${e._id}`),className:"text-lg font-semibold text-gray-900 hover:underline"},e.title),t.createElement("p",{className:"text-xs text-gray-500"},new Date(e.createdAt).toLocaleDateString()),t.createElement("p",{className:"mt-2 line-clamp-2 text-sm text-gray-700"},e.content))))))}export{P as default};
