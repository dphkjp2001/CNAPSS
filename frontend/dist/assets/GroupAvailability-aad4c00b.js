import{a as $,r as u,R as e}from"./index-3bf3b025.js";import{S as k}from"./ScheduleGrid-eb372e66.js";function w(){const t=[];for(let a=8;a<20;a++)for(let l=0;l<60;l+=15)t.push(`${a.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`);return t}function R(){const{user:t}=$(),[a,l]=u.useState(""),[y,b]=u.useState([]),[f,p]=u.useState(!1),S=async()=>{const d=a.split(",").map(n=>n.trim()).filter(Boolean),x=(t==null?void 0:t.email)||"anonymous",E=Array.from(new Set([x,...d]));p(!0);try{const g=(await(await fetch("/api/schedule/compare",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userIds:E})})).json()).schedules||[],c=w(),I=["MON","TUE","WED","THU","FRI"],i={};for(let s of I)for(let r of c){const o=`${s}_${r}`;i[o]=0}g.forEach(s=>{s.forEach(({day:r,start:o,end:v})=>{const N=c.indexOf(o),C=c.indexOf(v);for(let m=N;m<C;m++){const T=`${r}_${c[m]}`;i[T]+=1}})});const h=[];for(let s in i)if(i[s]===0){const[r,o]=s.split("_");h.push({day:r,start:o,end:o,label:"âœ…"})}b(h)}catch(n){console.error("Compare failed:",n)}finally{p(!1)}};return e.createElement("div",{className:"p-4"},e.createElement("h1",{className:"text-xl font-semibold mb-2"},"Group Availability"),e.createElement("p",{className:"text-sm text-gray-500 mb-4"},"Enter comma-separated user IDs to find shared free times. (You are automatically included)"),e.createElement("div",{className:"mb-4"},e.createElement("input",{type:"text",placeholder:"friend1@school.edu, friend2@school.edu",className:"p-2 border rounded w-full mb-2 text-sm",value:a,onChange:d=>l(d.target.value)}),e.createElement("button",{onClick:S,className:"px-4 py-1 bg-blue-600 text-white rounded text-sm disabled:opacity-50",disabled:f},f?"Checking...":"Compare Schedules")),e.createElement(k,{schedules:y}))}export{R as default};
