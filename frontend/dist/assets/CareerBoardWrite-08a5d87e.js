import{c as E,u as w,b as v,a as N,e as C,r,R as e,A as k}from"./index-17793bbb.js";import{c as S}from"./careerPosts-ec3514b7.js";function P(){const{user:c}=E(),{school:m,schoolTheme:n}=w(),u=v(),l=N(),{ensureAuth:i}=C(),[a,f]=r.useState(""),[o,h]=r.useState(""),[d,b]=r.useState(""),s=r.useMemo(()=>!!(a.trim()&&o.trim()),[a,o]),g=r.useCallback(async()=>{try{b(""),await S({title:a.trim(),content:o.trim(),school:m}),alert("Post submitted!"),l(u("/career"))}catch(t){console.error("Career post creation error:",t);const x=(t==null?void 0:t.message)||"Unexpected error occurred.";b(x),alert(x)}},[a,o,m,l,u]),y=r.useCallback(async()=>{if(s){if(!c){i();return}await g()}},[s,c,i,g]),p=t=>{(t.metaKey||t.ctrlKey)&&t.key==="Enter"&&(t.preventDefault(),y())};return e.createElement("div",{className:"min-h-screen px-4 py-6 sm:px-6",style:{backgroundColor:(n==null?void 0:n.bg)||"#f6f3ff"}},e.createElement("div",{className:"mx-auto max-w-3xl"},e.createElement("div",{className:"overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-sm"},e.createElement("div",{className:"border-b border-gray-100 p-5 sm:p-6"},e.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"New Career Post"),e.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Discuss internships, careers, or academic planning with your campus community.")),e.createElement("form",{onSubmit:t=>t.preventDefault(),className:"space-y-5 p-5 sm:p-6"},e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-900"},"Title"),e.createElement("input",{type:"text",value:a,onChange:t=>f(t.target.value),onKeyDown:p,placeholder:"Enter a title",className:"mt-2 w-full rounded-xl border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 placeholder:text-gray-400 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-2 focus:ring-gray-900/10",required:!0,"aria-label":"post title"})),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-900"},"Content"),e.createElement("textarea",{value:o,onChange:t=>h(t.target.value),onKeyDown:p,placeholder:"Write your postâ€¦",rows:10,className:"mt-2 w-full rounded-xl border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 placeholder:text-gray-400 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-2 focus:ring-gray-900/10",required:!0,"aria-label":"post content"})),!!d&&e.createElement("div",{className:"rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700"},d),e.createElement("div",{className:"flex items-center justify-end gap-3"},e.createElement("button",{type:"button",onClick:()=>l(-1),className:"rounded-xl border px-4 py-2 text-sm hover:bg-gray-50"},"Cancel"),e.createElement(k,{type:"button",onClick:y,className:"rounded-xl bg-gray-900 px-4 py-2 text-sm font-semibold text-white hover:bg-black "+(s?"":"opacity-50 cursor-not-allowed"),disabled:!s},"Submit"))))))}export{P as default};
